import { Meta, Props, Story, Preview } from '@storybook/addon-docs/blocks';
import { withA11y } from '@storybook/addon-a11y';
import DModal from '../components/d-modal.vue';
import DButton from '../components/d-button.vue';
import { action } from "@storybook/addon-actions";

<Meta title="Elements|Modal" component={DModal} />

# Modal
<Props of={DModal} />

# DModal component
```jsx
<DButton name="Show Modal" @click="showModal = true" />
<DModal v-if="showModal" title="Modal Title" @close="showModal = false" />
```

<Preview>
  <Story name="Modal" decorators={[withA11y]}>
    {{
      components: { DModal, DButton },
      methods: { action: action("clicked") },
      data() {
          return {
              modals: [
                { title: 'Modal with Title', content: null, footer: false, show: false},
                { title: 'Modal with Title and Content', content: { component: "Modal", triggeredBy: "Button" }, footer: false, show: false},
                { title: 'Modal with Title, Content and Footer', content: { component: "Modal", triggeredBy: "Button" }, footer: true, show: false}
              ]
          }
      },
      template: `
      <div>
        <div v-for="modal  in modals">
          <h1 style="margin-bottom: 1rem;"> {{ modal.title }}</h1>
          <DButton name="Show Modal" @click="modal.show = !modal.show" />
          <DModal v-if="modal.show" :title="modal.title" :footer="modal.footer" :content="modal.content" @close="modal.show = !modal.show" > 
            <template #footer>
              <DButton name="Save changes" variant="success" @click="modal.show = !modal.show"/>
              <DButton name="Cancel" @click="modal.show = !modal.show"/>
            </template>
          </DModal>
        </div>
      </div>
      `
    }}
  </Story>
</Preview>